<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBuddy | Hostel, Carpool, Books & Lost&Found</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
            --radius: 12px;
            --shadow: 0 4px 6px rgba(112, 52, 52, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
        }

        .auth-buttons button {
            background-color: white;
            color: var(--primary);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            margin-left: 10px;
            transition: var(--transition);
        }

        .auth-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            background-color: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 15px 0;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .tab:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .tab.active {
            color: var(--primary);
            font-weight: 500;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 3px;
            background-color: var(--primary);
            border-radius: 3px;
        }

        /* Content Sections */
        .content-section {
            display: none;
            background-color: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .section-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--dark);
        }

        .section-actions button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .section-actions button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background-color: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-img {
            height: 180px;
            background-color: #eee;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .card-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--warning);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .card-content {
            padding: 15px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }

        .card-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .feature {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .price {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .price span {
            font-size: 14px;
            font-weight: 400;
            color: #666;
        }

        .card-actions button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }

        .card-actions button:hover {
            background-color: var(--secondary);
        }

        /* Forms */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-family: inherit;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: var(--radius);
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-secondary {
            background-color: #eee;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background-color: #ddd;
        }

        /* AI Features */
        .ai-assistant {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
        }

        .ai-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .ai-button:hover {
            transform: scale(1.1);
        }

        .ai-chat {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: none;
            overflow: hidden;
        }

        .ai-chat-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            font-weight: 500;
        }

        .ai-chat-body {
            height: 300px;
            padding: 15px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .ai-message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: var(--radius);
            max-width: 80%;
        }

        .ai-message.user {
            background-color: var(--primary);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0;
        }

        .ai-message.bot {
            background-color: white;
            border: 1px solid #eee;
            margin-right: auto;
            border-bottom-left-radius: 0;
        }

        .ai-chat-input {
            display: flex;
            padding: 10px;
            background-color: white;
            border-top: 1px solid #eee;
        }

        .ai-chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            margin-right: 10px;
        }

        .ai-chat-input button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0 15px;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .ai-chat {
                width: 300px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-university"></i>
                <span>MyBuddy</span>
            </div>
            <div class="auth-buttons">
                <button id="loginBtn">Login</button>
                <button id="registerBtn">Register</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="nav-tabs">
            <div class="tab active" data-tab="hostel">
                <i class="fas fa-hotel"></i> Hostel Services
            </div>
            <div class="tab" data-tab="pool">
                <i class="fas fa-car"></i> Car Pooling
            </div>
            <div class="tab" data-tab="books">
                <i class="fas fa-book"></i> Books Marketplace
            </div>
            <div class="tab" data-tab="lost">
                <i class="fas fa-search"></i> Lost & Found
            </div>
        </div>

        <!-- Hostel Services Section -->
        <section id="hostel" class="content-section active">
            <div class="section-header">
                <h2 class="section-title">Find Your Perfect Hostel</h2>
                <div class="section-actions">
                    <button id="addHostelBtn">List Your Hostel</button>
                </div>
            </div>
            
            <div class="search-bar">
                <div class="form-group">
                    <input type="text" class="form-control" id="hostelSearch" placeholder="Search by location, amenities...">
                </div>
            </div>
            
            <div class="cards-grid" id="hostelCards">
                <!-- Hostel cards will be generated here -->
            </div>
        </section>

        <!-- Car Pooling Section -->
        <section id="pool" class="content-section">
            <div class="section-header">
                <h2 class="section-title">Find or Offer a Ride</h2>
                <div class="section-actions">
                    <button id="addRideBtn">Offer Ride</button>
                </div>
            </div>
            
            <div class="cards-grid" id="rideCards">
                <!-- Ride cards will be generated here -->
            </div>
        </section>

        <!-- Books Marketplace Section -->
        <section id="books" class="content-section">
            <div class="section-header">
                <h2 class="section-title">Buy or Sell Used Books</h2>
                <div class="section-actions">
                    <button id="addBookBtn">Sell Book</button>
                </div>
            </div>
            
            <div class="cards-grid" id="bookCards">
                <!-- Book cards will be generated here -->
            </div>
        </section>

        <!-- Lost & Found Section -->
        <section id="lost" class="content-section">
            <div class="section-header">
                <h2 class="section-title">Lost & Found</h2>
                <div class="section-actions">
                    <button id="reportItemBtn">Report Item</button>
                </div>
            </div>
            
            <div class="cards-grid" id="lostItemCards">
                <!-- Lost item cards will be generated here -->
            </div>
        </section>
    </div>

    <!-- AI Assistant -->
    <div class="ai-assistant">
        <button class="ai-button" id="aiButton">
            <i class="fas fa-robot"></i>
        </button>
        <div class="ai-chat" id="aiChat">
            <div class="ai-chat-header">
                MyBuddy AI Assistant
            </div>
            <div class="ai-chat-body" id="aiChatBody">
                <div class="ai-message bot">
                    Hello! I'm your MyBuddy AI assistant. How can I help you today?
                </div>
            </div>
            <div class="ai-chat-input">
                <input type="text" id="aiUserInput" placeholder="Ask me anything...">
                <button id="aiSendBtn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="hostelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">List Your Hostel</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="hostelForm">
                <div class="form-group">
                    <label for="hostelName">Hostel Name</label>
                    <input type="text" class="form-control" id="hostelName" required>
                </div>
                <div class="form-group">
                    <label for="hostelLocation">Location</label>
                    <input type="text" class="form-control" id="hostelLocation" required>
                </div>
                <div class="form-group">
                    <label for="hostelPrice">Monthly Price (₹)</label>
                    <input type="number" class="form-control" id="hostelPrice" required>
                </div>
                <div class="form-group">
                    <label for="hostelAmenities">Amenities (comma separated)</label>
                    <input type="text" class="form-control" id="hostelAmenities" placeholder="WiFi, Laundry, AC...">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="rideModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Offer a Ride</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="rideForm">
                <div class="form-group">
                    <label for="rideFrom">From</label>
                    <input type="text" class="form-control" id="rideFrom" required>
                </div>
                <div class="form-group">
                    <label for="rideTo">To</label>
                    <input type="text" class="form-control" id="rideTo" required>
                </div>
                <div class="form-group">
                    <label for="rideDate">Date & Time</label>
                    <input type="datetime-local" class="form-control" id="rideDate" required>
                </div>
                <div class="form-group">
                    <label for="rideSeats">Available Seats</label>
                    <input type="number" class="form-control" id="rideSeats" min="1" required>
                </div>
                <div class="form-group">
                    <label for="ridePrice">Price per Seat (₹)</label>
                    <input type="number" class="form-control" id="ridePrice" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="bookModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Sell a Book</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="bookForm">
                <div class="form-group">
                    <label for="bookTitle">Book Title</label>
                    <input type="text" class="form-control" id="bookTitle" required>
                </div>
                <div class="form-group">
                    <label for="bookAuthor">Author</label>
                    <input type="text" class="form-control" id="bookAuthor" required>
                </div>
                <div class="form-group">
                    <label for="bookCourse">Course/Subject</label>
                    <input type="text" class="form-control" id="bookCourse">
                </div>
                <div class="form-group">
                    <label for="bookPrice">Price (₹)</label>
                    <input type="number" class="form-control" id="bookPrice" required>
                </div>
                <div class="form-group">
                    <label for="bookCondition">Condition</label>
                    <select class="form-control" id="bookCondition">
                        <option value="New">New</option>
                        <option value="Like New">Like New</option>
                        <option value="Good">Good</option>
                        <option value="Fair">Fair</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="lostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Report Lost Item</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="lostForm">
                <div class="form-group">
                    <label for="itemName">Item Name</label>
                    <input type="text" class="form-control" id="itemName" required>
                </div>
                <div class="form-group">
                    <label for="itemCategory">Category</label>
                    <select class="form-control" id="itemCategory">
                        <option value="Electronics">Electronics</option>
                        <option value="Books">Books</option>
                        <option value="Wallet">Wallet</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="itemLocation">Last Seen Location</label>
                    <input type="text" class="form-control" id="itemLocation" required>
                </div>
                <div class="form-group">
                    <label for="itemDate">Date Lost</label>
                    <input type="date" class="form-control" id="itemDate" required>
                </div>
                <div class="form-group">
                    <label for="itemDescription">Description</label>
                    <textarea class="form-control" id="itemDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Database Simulation
        const db = {
            hostels: JSON.parse(localStorage.getItem('hostels')) || [
                {
                    id: 1,
                    name: "Green Valley Hostel",
                    location: "Near University Campus",
                    price: 8000,
                    amenities: ["WiFi", "AC", "Laundry", "Mess"],
                    image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
                    rating: 4.5
                },
                {
                    id: 2,
                    name: "Royal Boys Hostel",
                    location: "5 mins from College",
                    price: 6500,
                    amenities: ["WiFi", "Parking", "Mess"],
                    image: "https://images.unsplash.com/photo-1582719471388-93e9e164bc1a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1173&q=80",
                    rating: 4.2
                }
            ],
            rides: JSON.parse(localStorage.getItem('rides')) || [
                {
                    id: 1,
                    from: "University Campus",
                    to: "Central Station",
                    date: "2023-06-15T08:00",
                    seats: 3,
                    price: 150,
                    user: "John D.",
                    rating: 4.8
                },
                {
                    id: 2,
                    from: "Main Square",
                    to: "Airport",
                    date: "2023-06-16T14:30",
                    seats: 2,
                    price: 200,
                    user: "Sarah M.",
                    rating: 4.5
                }
            ],
            books: JSON.parse(localStorage.getItem('books')) || [
                {
                    id: 1,
                    title: "Introduction to Algorithms",
                    author: "Thomas H. Cormen",
                    course: "Computer Science",
                    price: 1200,
                    condition: "Good",
                    image: "https://images-na.ssl-images-amazon.com/images/I/41VQ9uXwuFL._SX342_SY445_QL70_ML2_.jpg"
                },
                {
                    id: 2,
                    title: "Modern Physics",
                    author: "Arthur Beiser",
                    course: "Physics",
                    price: 800,
                    condition: "Like New",
                    image: "https://m.media-amazon.com/images/I/51+Q3uGpNTL._SY425_.jpg"
                }
            ],
            lostItems: JSON.parse(localStorage.getItem('lostItems')) || [
                {
                    id: 1,
                    name: "Black Wallet",
                    category: "Wallet",
                    location: "Library",
                    date: "2023-06-10",
                    description: "Contains ID card and some cash",
                    status: "Lost"
                },
                {
                    id: 2,
                    name: "MacBook Pro",
                    category: "Electronics",
                    location: "Computer Lab",
                    date: "2023-06-12",
                    description: "Space gray, 13-inch, 2020 model",
                    status: "Lost"
                }
            ]
        };

        // AI Knowledge Base
        const aiKnowledge = {
            hostel: [
                "You can search for hostels by location, price range, or amenities.",
                "Hostel owners can list their properties by clicking 'List Your Hostel'.",
                "Each hostel listing shows amenities, pricing, and location details.",
                "You can contact hostel owners directly through the platform."
            ],
            pool: [
                "Offer rides to share costs and reduce carbon footprint.",
                "Search for rides by destination and time.",
                "Verified users get a badge for trust and safety.",
                "You can split costs automatically through the platform."
            ],
            books: [
                "Search for books by title, author, or course.",
                "Use the barcode scanner to quickly add books for sale.",
                "You can negotiate prices directly with sellers.",
                "Popular books get highlighted in search results."
            ],
            lost: [
                "Report lost items with as much detail as possible.",
                "Our AI matches lost and found items automatically.",
                "You can browse recently found items in your area.",
                "Verified claims help prevent fraudulent reports."
            ],
            general: [
                "MyBuddy AI helps you navigate campus life efficiently.",
                "All transactions are secure and verified.",
                "You can earn rewards for active participation.",
                "The platform is completely free for basic services."
            ]
        };

        // AI Functions
        function getAIResponse(query) {
            query = query.toLowerCase();
            
            // Check for greetings
            if (query.includes('hello') || query.includes('hi') || query.includes('hey')) {
                return "Hello! How can I assist you today?";
            }
            
            // Check for help requests
            if (query.includes('help') || query.includes('support')) {
                return "I can help you with hostel bookings, carpooling, buying/selling books, and lost & found services. What do you need help with?";
            }
            
            // Check for specific service queries
            if (query.includes('hostel') || query.includes('accommodation') || query.includes('stay')) {
                return aiKnowledge.hostel[Math.floor(Math.random() * aiKnowledge.hostel.length)];
            }
            
            if (query.includes('ride') || query.includes('carpool') || query.includes('travel')) {
                return aiKnowledge.pool[Math.floor(Math.random() * aiKnowledge.pool.length)];
            }
            
            if (query.includes('book') || query.includes('textbook') || query.includes('study')) {
                return aiKnowledge.books[Math.floor(Math.random() * aiKnowledge.books.length)];
            }
            
            if (query.includes('lost') || query.includes('found') || query.includes('missing')) {
                return aiKnowledge.lost[Math.floor(Math.random() * aiKnowledge.lost.length)];
            }
            
            // Default response
            return aiKnowledge.general[Math.floor(Math.random() * aiKnowledge.general.length)];
        }

        // DOM Elements
        const tabs = document.querySelectorAll('.tab');
        const contentSections = document.querySelectorAll('.content-section');
        const modals = document.querySelectorAll('.modal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        
        // Tab Switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const tabId = tab.getAttribute('data-tab');
                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === tabId) {
                        section.classList.add('active');
                    }
                });
                
                // Update the AI's context
                currentContext = tabId;
            });
        });

        // Modal Handling
        document.getElementById('addHostelBtn').addEventListener('click', () => {
            document.getElementById('hostelModal').style.display = 'flex';
        });

        document.getElementById('addRideBtn').addEventListener('click', () => {
            document.getElementById('rideModal').style.display = 'flex';
        });

        document.getElementById('addBookBtn').addEventListener('click', () => {
            document.getElementById('bookModal').style.display = 'flex';
        });

        document.getElementById('reportItemBtn').addEventListener('click', () => {
            document.getElementById('lostModal').style.display = 'flex';
        });

        closeModalButtons.forEach(button => {
            button.addEventListener('click', () => {
                modals.forEach(modal => {
                    modal.style.display = 'none';
                });
            });
        });

        // Click outside modal to close
        modals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Form Submissions
        document.getElementById('hostelForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newHostel = {
                id: Date.now(),
                name: document.getElementById('hostelName').value,
                location: document.getElementById('hostelLocation').value,
                price: parseInt(document.getElementById('hostelPrice').value),
                amenities: document.getElementById('hostelAmenities').value.split(',').map(item => item.trim()),
                image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
                rating: Math.floor(Math.random() * 2) + 3 + Math.random()
            };
            
            db.hostels.push(newHostel);
            localStorage.setItem('hostels', JSON.stringify(db.hostels));
            renderHostels();
            document.getElementById('hostelModal').style.display = 'none';
            e.target.reset();
        });

        document.getElementById('rideForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newRide = {
                id: Date.now(),
                from: document.getElementById('rideFrom').value,
                to: document.getElementById('rideTo').value,
                date: document.getElementById('rideDate').value,
                seats: parseInt(document.getElementById('rideSeats').value),
                price: parseInt(document.getElementById('ridePrice').value),
                user: "You",
                rating: 5.0
            };
            
            db.rides.push(newRide);
            localStorage.setItem('rides', JSON.stringify(db.rides));
            renderRides();
            document.getElementById('rideModal').style.display = 'none';
            e.target.reset();
        });

        document.getElementById('bookForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newBook = {
                id: Date.now(),
                title: document.getElementById('bookTitle').value,
                author: document.getElementById('bookAuthor').value,
                course: document.getElementById('bookCourse').value,
                price: parseInt(document.getElementById('bookPrice').value),
                condition: document.getElementById('bookCondition').value,
                image: "https://images-na.ssl-images-amazon.com/images/I/41VQ9uXwuFL._SX342_SY445_QL70_ML2_.jpg"
            };
            
            db.books.push(newBook);
            localStorage.setItem('books', JSON.stringify(db.books));
            renderBooks();
            document.getElementById('bookModal').style.display = 'none';
            e.target.reset();
        });

        document.getElementById('lostForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newItem = {
                id: Date.now(),
                name: document.getElementById('itemName').value,
                category: document.getElementById('itemCategory').value,
                location: document.getElementById('itemLocation').value,
                date: document.getElementById('itemDate').value,
                description: document.getElementById('itemDescription').value,
                status: "Lost"
            };
            
            db.lostItems.push(newItem);
            localStorage.setItem('lostItems', JSON.stringify(db.lostItems));
            renderLostItems();
            document.getElementById('lostModal').style.display = 'none';
            e.target.reset();
        });

        // Rendering Functions
        function renderHostels() {
            const container = document.getElementById('hostelCards');
            container.innerHTML = db.hostels.map(hostel => `
                <div class="card">
                    <div class="card-img" style="background-image: url('${hostel.image}')">
                        <div class="card-badge">${hostel.rating.toFixed(1)} ★</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${hostel.name}</h3>
                        <p class="card-subtitle">${hostel.location}</p>
                        <div class="card-features">
                            ${hostel.amenities.map(amenity => `<span class="feature">${amenity}</span>`).join('')}
                        </div>
                        <div class="card-footer">
                            <div class="price">₹${hostel.price}<span>/month</span></div>
                            <div class="card-actions">
                                <button>View Details</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderRides() {
            const container = document.getElementById('rideCards');
            container.innerHTML = db.rides.map(ride => {
                const date = new Date(ride.date);
                return `
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title">${ride.from} → ${ride.to}</h3>
                        <p class="card-subtitle">${date.toLocaleString()}</p>
                        <div class="card-features">
                            <span class="feature">${ride.seats} seats</span>
                            <span class="feature">₹${ride.price}/seat</span>
                            <span class="feature">${ride.user}</span>
                            <span class="feature">${ride.rating} ★</span>
                        </div>
                        <div class="card-footer">
                            <div class="card-actions">
                                <button>Join Ride</button>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        function renderBooks() {
            const container = document.getElementById('bookCards');
            container.innerHTML = db.books.map(book => `
                <div class="card">
                    <div class="card-img" style="background-image: url('${book.image}')"></div>
                    <div class="card-content">
                        <h3 class="card-title">${book.title}</h3>
                        <p class="card-subtitle">by ${book.author}</p>
                        <div class="card-features">
                            <span class="feature">${book.course}</span>
                            <span class="feature">${book.condition}</span>
                        </div>
                        <div class="card-footer">
                            <div class="price">₹${book.price}</div>
                            <div class="card-actions">
                                <button>Contact Seller</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderLostItems() {
            const container = document.getElementById('lostItemCards');
            container.innerHTML = db.lostItems.map(item => `
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title">${item.name}</h3>
                        <p class="card-subtitle">${item.category} • ${item.location}</p>
                        <p class="card-subtitle">Lost on ${new Date(item.date).toLocaleDateString()}</p>
                        <p>${item.description}</p>
                        <div class="card-footer">
                            <div class="card-actions">
                                <button>Claim Item</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // AI Chat Functionality
        document.getElementById('aiButton').addEventListener('click', () => {
            const chat = document.getElementById('aiChat');
            chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
        });

        document.getElementById('aiSendBtn').addEventListener('click', sendAIMessage);
        document.getElementById('aiUserInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendAIMessage();
        });

        function sendAIMessage() {
            const input = document.getElementById('aiUserInput');
            const message = input.value.trim();
            if (!message) return;
            
            const chatBody = document.getElementById('aiChatBody');
            
            // Add user message
            chatBody.innerHTML += `
                <div class="ai-message user">${message}</div>
            `;
            
            input.value = '';
            
            // Simulate AI typing
            setTimeout(() => {
                const response = getAIResponse(message);
                chatBody.innerHTML += `
                    <div class="ai-message bot">${response}</div>
                `;
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
            
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Initialize
        renderHostels();
        renderRides();
        renderBooks();
        renderLostItems();

        // AI Context
        let currentContext = 'hostel';
    </script>
</body>
</html>